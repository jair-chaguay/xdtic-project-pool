"use strict";var Promise=require("node_modules/es6-promise/dist/es6-promise").Promise;require("node_modules/whatwg-fetch/fetch");var tools=require("static/js/module/tools"),urlPostProject=urlPrefix+"/fn/project/post";Vue.component("tic-tag-box",{template:"#tic-tag",data:function(){return{tags:["Web","安卓","iOS","硬件","其他"],showTag:!0,selected:[],tagAdded:"",isShowTagAdd:!1,unfold:!0}},computed:{tagsSelected:function(){return this.selected.join("&")}},methods:{switchTag:function(){this.showTag=!this.showTag,this.unfold=!this.unfold},isSelected:function(t){return this.selected.indexOf(t)>-1},tagTap:function(t){var e=t.event,s=e.target,o=s.dataset.tag;if(this.selected.indexOf(o)>-1){var i=this.selected.indexOf(o);this.selected.splice(i,1)}else this.selected.push(o)},showTagAdd:function(){this.isShowTagAdd=!0},hideTagAdd:function(){this.isShowTagAdd=!1},addTag:function(){this.tags.push(this.tagAdded),this.selected.push(this.tagAdded),this.isShowTagAdd=!1,this.tagAdded=""}}});var appPostProject=new Vue({el:"#appPostProject",data:{postIsFail:!1,postIsSucc:!1},methods:{postProject:function(){self=this,fetch(urlPostProject,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},credentials:"same-origin",body:tools.formSerialize("#formPostProject")}).then(function(t){return t.json()}).then(function(t){"ok"===t.code?(self.postIsSucc=!0,setTimeout(function(){window.location.href=urlPrefix+"/myProject?type=post"},500)):self.postIsFail=!0})["catch"](function(t){self.postIsFail=!0,console.log("request failed",t)})},navBack:function(){window.history.go(-1)},closeDialog:function(){this.postIsFail=!1}}});