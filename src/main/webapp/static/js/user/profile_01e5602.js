"use strict";var Promise=require("node_modules/es6-promise/dist/es6-promise").Promise;require("node_modules/whatwg-fetch/fetch");var formSerialize=require("static/js/module/formSerialize"),urlUpdateProfile=urlPrefix+"/fn/update/profile",appProfile=new Vue({el:"#appProfile",data:{isEditing:!1,user:userInfo,editFail:!1,editIsSucc:!1},computed:{userSex:function(){return"boy"===this.user.sex?"男":"女"}},methods:{showEditer:function(){this.isEditing=!0},editProfile:function(){fetch(urlUpdateProfile,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},credentials:"same-origin",body:formSerialize("#formProfile")}).then(function(e){return e.json()}).then(function(e){if("ok"===e.code){appProfile.editIsSucc=!0,setTimeout(function(){appProfile.isEditing=!1,appProfile.editIsSucc=!1},500)}else appProfile.editFail=!0})["catch"](function(e){appProfile.editFail=!0,console.log("request failed",e)})},navBack:function(){window.history.go(-1)},closeDialog:function(){this.editFail=!1}}});